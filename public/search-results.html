<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sökresultat</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
    <script src="search-results.js" defer></script>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  </head>

  <body>
    <!--HEADERLOGGA--->

    <header class="logo-container">
      <a href="http://localhost:3001/"
        ><img src="images/LOGGA.png" alt="Freaky Fashion logotyp" class="logo"
      /></a>

      <!--SÖKRUTA-->
      <div class="search-container">
        <input type="search" id="search" placeholder="Sök produkt" class="search" />
        <i class="fa-solid fa-magnifying-glass"></i>

        <nav class="icons-container">
            <a href=""><i class="fa-regular fa-heart"></i></a>
            <a href=""><i class="fa-solid fa-shopping-cart"></i></a>
            <a href=""><i class="fa-solid fa-lock"></i></a>
        </nav>
    </div>
</header>

    <!--HEADERLÄNKAR-->
    <nav class="headerlink">
      <a href="">Hem</a>
      <a href="#">Nyheter</a>
      <a href="#">Topplistan</a>
      <a href="">Rea</a>
      <a href="#">Kampanjer</a>
    </nav>

    <header>
      <h1 class="sökresultat">Sökresultat</h1>
    </header>

    <div class="results-container">
        <div class="product-grid"></div>
    </div>
    

    <footer>
      <section class="accordion">
        <div class="accordion-item">
          <input
            type="checkbox"
            id="accordion-item-1"
            class="accordion-checkbox"
          />
          <label for="accordion-item-1" class="accordion-button"
            >Shopping</label
          >
          <div class="accordion-body">
            <a href="#">Vinterjackor</a>
            <a href="#">Pufferjackor</a>
            <a href="#">Kappa</a>
            <a href="#">Trenchcoats</a>
            <a href="">Startsida</a>
          </div>
        </div>

        <div class="accordion-item">
          <input
            type="checkbox"
            id="accordion-item-2"
            class="accordion-checkbox"
          />
          <label for="accordion-item-2" class="accordion-button"
            >Mina sidor</label
          >
          <div class="accordion-body">
            <a href="#">Mina ordrar</a>
            <a href="#">Mitt konto</a>
          </div>
        </div>

        <div class="accordion-item">
          <input
            type="checkbox"
            id="accordion-item-3"
            class="accordion-checkbox"
          />
          <label for="accordion-item-3" class="accordion-button"
            >Kundtjänst</label
          >
          <div class="accordion-body">
            <a href="#">Returnpolicy</a>
            <a href="#">Integritetspolicy</a>
          </div>
        </div>
      </section>
      <section class="footerinfo">
        <div class="footer-shopping">
          <p>Shopping</p>
          <a href="#">Vinterjackor</a>
          <a href="#">Pufferjackor</a>
          <a href="#">Kappa</a>
          <a href="#">Trenchcoats</a>
        </div>
        <div class="minasidor">
          <p>Mina Sidor</p>
          <a href="#">Mina Ordrar</a>
          <a href="#">Mitt Konto</a>
        </div>
        <div class="footer-kundtjanst">
          <p>Kundtjänst</p>
          <a href="#">Returnpolicy</a>
          <a href="#">Integritetspolicy</a>
        </div>
      </section>
      <div class="copyright">
        <p>© Freaky Fashion.</p>
      </div>
    </footer>
    <script>
      // Din array med produkter
      const products = [
        {
          id: 1,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-1.png",
          price: "199kr",
          description: "En snygg svart t-shirt från Levis.",
        },
        {
          id: 2,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-2.png",
          price: "249kr",
          description: "En trendig svart t-shirt från Levis.",
        },
        {
          id: 3,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-3.png",
          price: "299kr",
          description: "En cool svart t-shirt från Levis.",
        },
        {
          id: 4,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-4.png",
          price: "199kr",
          description: "En snygg svart t-shirt från Levis.",
        },
        {
          id: 5,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-5.png",
          price: "249kr",
          description: "En trendig svart t-shirt från Levis.",
        },
        {
          id: 6,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-6.png",
          price: "299kr",
          description: "En cool svart t-shirt från Levis.",
        },
        {
          id: 7,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-7.png",
          price: "249kr",
          description: "En trendig svart t-shirt från Levis.",
        },
        {
          id: 8,
          name: "Svart t-shirt",
          image: "images/svart-tshirt-8.png",
          price: "299kr",
          description: "En cool svart t-shirt från Levis.",
        },
      ];

      // Hämta söktermen från URL
      const urlParams = new URLSearchParams(window.location.search);
      const searchTerm = urlParams.get("q");

      // Filtrera produkterna baserat på söktermen
      const filteredProducts = products.filter((product) =>
        product.name.toLowerCase().includes(searchTerm.toLowerCase())
      );

      // Visa sökresultaten
      const productGrid = document.querySelector(".product-grid");

      if (filteredProducts.length > 0) {
        filteredProducts.forEach((product) => {
          const productElement = document.createElement("article");
          productElement.classList.add("product");
          productElement.innerHTML = (
            <a href="product-details.html?id=${product.id}">
              <img src="${product.image}" alt="${product.name}" />
              <h2>${product.name}</h2>
              <p>${product.price}</p>
            </a>
          );
          productGrid.appendChild(productElement);
        });
      } else {
        productGrid.innerHTML = "<p>Inga produkter hittades.</p>";
      }

      // Lägg till event listener för sökfältet
      const searchField = document.getElementById("search");
      searchField.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          const searchTerm = searchField.value;
          if (searchTerm) {
            window.location.href = `search-results.html?q=${encodeURIComponent(
              searchTerm
            )}`;
          }
        }
      });
    </script>
  </body>
</html>
